import{j as e,r as a}from"./react-81QIzOlz.js";import{c as je}from"./react-dom-D2u5g1Xv.js";import{L as k,B as ye}from"./react-router-dom-B01MV-LI.js";import{u as $,a as U,P as be}from"./react-redux-BI9Fa3fH.js";import{c as oe,a as we}from"./@reduxjs-DYPsSoVN.js";import{A as ve,H as Ne,a as ke,b as A,c as ne,d as ie,e as Se,f as E,F as Pe,g as Ue,h as O,i as Ce,j as Te,k as De,B as Ee,l as Ie,m as Le,n as Fe,o as Me,p as $e}from"./react-icons-CRiNe-mr.js";import{g as _e,G as Re,s as Ve}from"./firebase-3uSlTs3O.js";import{s as Oe,t as z,u as B,v as Y,w as H}from"./@firebase-DGpb6H_C.js";import{a as D,b as I,O as de,d as ce,e as Z,f as Ae,g as C}from"./react-router-B0uQUEt8.js";import{C as F}from"./react-circular-progressbar-22WhFD8E.js";import{g as K}from"./gsap-DjKJqAo0.js";import{R as W}from"./react-quill-BJH1QAFi.js";import{h as ze}from"./moment-C5S46NFB.js";import{p as Be,a as Ye,d as He,P as We}from"./redux-persist-CLZwI3AS.js";import{c as qe}from"./redux-DITMfSWq.js";import"./lodash-7JC8rLxo.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BFLWy9pZ.js";import"./use-sync-external-store-Bz-T0wVJ.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./quill-TFBJ2J59.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))p(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&p(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function p(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function ee({post:t}){return e.jsxs("div",{className:"group relative w-full border border-teal-500 hover:border-2 h-[400px] overflow-hidden rounded-lg sm:w-[400px] transition-all",children:[e.jsx(k,{to:`/post/${t.slug}`,children:e.jsx("img",{src:t.image,alt:"post cover",className:"h-[260px] w-full  object-cover group-hover:h-[200px] transition-all duration-300 z-20"})}),e.jsxs("div",{className:"p-3 flex flex-col gap-2",children:[e.jsx("p",{className:"text-lg font-semibold line-clamp-2",children:t.title}),e.jsx(k,{to:`/post/${t.slug}`,className:"z-10 group-hover:bottom-0 absolute bottom-[-200px] left-0 right-0 border border-teal-500 text-teal-500 hover:bg-teal-500 hover:text-white transition-all duration-300 text-center py-2 rounded-md !rounded-tl-none m-2",children:"Read article"})]})]})}function me({video:t}){return e.jsxs("div",{className:"group relative w-full border border-teal-500 hover:border-2 h-[400px] overflow-hidden rounded-lg sm:w-[400px] transition-all",children:[e.jsx("a",{href:t.videoUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:t.thumbnail,alt:"video cover",className:"h-[260px] w-full object-cover group-hover:h-[200px] transition-all duration-300 z-20"})}),e.jsxs("div",{className:"p-3 flex flex-col gap-2",children:[e.jsx("p",{className:"text-lg font-semibold line-clamp-2",children:t.title}),e.jsx("a",{href:t.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"z-10 group-hover:bottom-0 absolute bottom-[-200px] left-0 right-0 border border-teal-500 text-teal-500 hover:bg-teal-500 hover:text-white transition-all duration-300 text-center py-2 rounded-md !rounded-tl-none m-2",children:"Watch Video"})]})]})}function Ge(){const[t,d]=a.useState([]),[n,p]=a.useState([]);a.useEffect(()=>{(async()=>{const h=await(await fetch("/api/video/getVideos")).json();p(h.videos)})()},[]),a.useEffect(()=>{(async()=>{const h=await(await fetch("/api/post/getPosts")).json();d(h.posts)})()},[]);const l=t&&t.length>0?t.slice(3,6):[],o=n&&n.length>0?n.slice(0,3):[];return e.jsxs("div",{children:[e.jsx("div",{className:"flex flex-col gap-6 py-28 px-3 max-w-7xl mx-auto ",children:e.jsxs("h1",{className:"text-3xl font-bold lg:text-9xl",children:["Welcome ",e.jsx("br",{}),"to my Blog"]})}),e.jsx("div",{className:"max-w-7xl mx-auto p-3 flex flex-col gap-8 py-7",children:t&&t.length>0&&e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Recent Posts"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:l.map(r=>e.jsx(ee,{post:r},r._id))}),e.jsx(k,{to:"/all-posts",className:"text-lg text-teal-500 hover:underline text-center",children:"View all posts"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto p-3 flex flex-col gap-8 py-7",children:n&&n.length>0&&e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Recent Videos"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:o.map(r=>e.jsx(me,{video:r},r._id))}),e.jsx(k,{to:"/all-videos",className:"text-lg text-teal-500 hover:underline text-center",children:"View all videos"})]})})]})}function Je(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"max-w-2xl mx-auto p-3 text-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font font-semibold text-center my-7",children:"About Sahand' Blog"}),e.jsxs("div",{className:"text-md text-gray-500 flex flex-col gap-6",children:[e.jsx("p",{children:"Welcome to Sahand's Blog! This blog was created by Sahand Ghavidel as a personal project to share his thoughts and ideas with the world. Sahand is a passionate developer who loves to write about technology, coding, and everything in between."}),e.jsx("p",{children:"On this blog, you'll find weekly articles and tutorials on topics such as web development, software engineering, and programming languages. Sahand is always learning and exploring new technologies, so be sure to check back often for new content!"}),e.jsx("p",{children:"We encourage you to leave comments on our posts and engage with other readers. You can like other people's comments and reply to them as well. We believe that a community of learners can help each other grow and improve."})]})]})})})}const Qe={currentUser:null,error:null,loading:!1},xe=oe({name:"user",initialState:Qe,reducers:{signInStart:t=>{t.loading=!0,t.error=null},signInSuccess:(t,d)=>{t.currentUser=d.payload,t.loading=!1,t.error=null},signInFailure:(t,d)=>{t.loading=!1,t.error=d.payload},updateStart:t=>{t.loading=!0,t.error=null},updateSuccess:(t,d)=>{t.currentUser=d.payload,t.loading=!1,t.error=null},updateFailure:(t,d)=>{t.loading=!1,t.error=d.payload},deleteUserStart:t=>{t.loading=!0,t.error=null},deleteUserSuccess:t=>{t.currentUser=null,t.loading=!1,t.error=null},deleteUserFailure:(t,d)=>{t.loading=!1,t.error=d.payload},signoutSuccess:t=>{t.currentUser=null,t.error=null,t.loading=!1}}}),{signInStart:Ke,signInSuccess:he,signInFailure:X,updateStart:Xe,updateSuccess:Ze,updateFailure:ae,deleteUserStart:et,deleteUserSuccess:tt,deleteUserFailure:re,signoutSuccess:te}=xe.actions,st=xe.reducer,at={apiKey:"AIzaSyCXZeqEiq9__9ItowPFj7Ojr_BAuOwIQW8",authDomain:"mern-auth-01-5b05a.firebaseapp.com",projectId:"mern-auth-01-5b05a",storageBucket:"mern-auth-01-5b05a.appspot.com",messagingSenderId:"111580657095",appId:"1:111580657095:web:c020b24cbb4af880d255e2"},_=Oe(at);function ue(){const t=_e(_),d=$(),n=D(),p=async()=>{const l=new Re;l.setCustomParameters({prompt:"select_account"});try{const o=await Ve(t,l),r=await fetch("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.user.displayName,email:o.user.email,googlePhotoUrl:o.user.photoURL})}),m=await r.json();r.ok&&(d(he(m)),n("/"))}catch(o){console.error("Error during Google sign-in:",o)}};return e.jsxs("button",{type:"button",onClick:p,className:"flex items-center justify-center px-6 py-2 bg-gradient-to-r from-pink-500 to-orange-500 text-white rounded-lg shadow-md hover:from-pink-600 hover:to-orange-600 transition duration-300",children:[e.jsx(ve,{className:"w-6 h-6 mr-2"}),"Continue with Google"]})}function rt(){const[t,d]=a.useState({}),{loading:n,error:p}=U(h=>h.user),l=$(),o=D(),r=h=>{d({...t,[h.target.id]:h.target.value.trim()})},m=async h=>{if(h.preventDefault(),!t.email||!t.password)return l(X("Please fill all the fields"));try{l(Ke());const f=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),j=await f.json();j.success===!1&&l(X(j.message)),f.ok&&(l(he(j)),o("/"))}catch(f){l(X(f.message))}};return e.jsx("div",{className:"min-h-screen mt-20",children:e.jsxs("div",{className:"flex p-3 max-w-3xl mx-auto flex-col md:flex-row md:items-center gap-5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(k,{to:"/",className:"font-bold text-4xl dark:text-white",children:[e.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-lg text-white",children:"Sahand's"}),"Blog"]}),e.jsx("p",{className:"text-sm mt-5",children:"This is a demo project. You can sign in with your email and password or with Google."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:m,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold mb-1",children:"Your email"}),e.jsx("input",{type:"email",id:"email",placeholder:"name@company.com",onChange:r,className:"border rounded-md p-2 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold mb-1",children:"Your password"}),e.jsx("input",{type:"password",id:"password",placeholder:"**********",onChange:r,className:"border rounded-md p-2 w-full"})]}),e.jsx("button",{type:"submit",disabled:n,className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-md flex items-center justify-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"animate-spin h-5 w-5 mr-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1H5a1 1 0 01-1-1V6zM4 10a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1H5a1 1 0 01-1-1v-1zM4 14a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1H5a1 1 0 01-1-1v-1zM10 6a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1V6zM10 10a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1zM10 14a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1zM16 6a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1V6zM16 10a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1zM16 14a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1z"})}),e.jsx("span",{children:"Loading..."})]}):"Sign In"}),e.jsx(ue,{})]}),e.jsxs("div",{className:"flex gap-2 text-sm mt-5",children:[e.jsx("span",{children:"Don't have an account?"}),e.jsx(k,{to:"/sign-up",className:"text-blue-500",children:"Sign Up"})]}),p&&e.jsx("div",{className:"mt-5 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p})]})]})})}function lt(){const t=I(),d=$(),{currentUser:n}=U(m=>m.user),[p,l]=a.useState("");a.useEffect(()=>{const h=new URLSearchParams(t.search).get("tab");h&&l(h)},[t.search]);const o=async()=>{try{const m=await fetch("/api/user/signout",{method:"POST"}),h=await m.json();m.ok?d(te()):console.log(h.message)}catch(m){console.log(m.message)}},r=[{to:"/dashboard?tab=dash",icon:Ne,label:"Dashboard",adminOnly:!0},{to:"/dashboard?tab=profile",icon:ke,label:n.isAdmin?"Admin":"User"},{to:"/dashboard?tab=posts",icon:A,label:"Posts",adminOnly:!0},{to:"/dashboard?tab=videos",icon:A,label:"Videos",adminOnly:!0},{to:"/dashboard?tab=users",icon:ne,label:"Users",adminOnly:!0},{to:"/dashboard?tab=comments",icon:ie,label:"Comments",adminOnly:!0}];return e.jsx("div",{className:"w-full md:w-56 bg-gray-800 text-white h-full flex flex-col",children:e.jsxs("div",{className:"flex flex-col gap-1 p-4",children:[r.map(({to:m,icon:h,label:f,adminOnly:j})=>(!j||n.isAdmin)&&e.jsx(k,{to:m,children:e.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer hover:bg-gray-700 ${p===new URLSearchParams(m.split("?")[1]).get("tab")?"bg-gray-600":""}`,children:[e.jsx(h,{className:"h-6 w-6 mr-3"}),e.jsx("span",{children:f})]})},m)),e.jsxs("div",{className:"flex items-center p-2 rounded-md cursor-pointer hover:bg-gray-700 mt-auto",onClick:o,children:[e.jsx(Se,{className:"h-6 w-6 mr-3"}),e.jsx("span",{children:"Sign Out"})]})]})})}function ot(){const{currentUser:t,error:d,loading:n}=U(v=>v.user),[p,l]=a.useState(null),[o,r]=a.useState(null),[m,h]=a.useState(null),[f,j]=a.useState(null),[s,u]=a.useState(!1),[i,x]=a.useState(null),[c,g]=a.useState(null),[y,w]=a.useState(!1),[b,P]=a.useState({}),R=a.useRef(),T=$(),q=v=>{const N=v.target.files[0];N&&(l(N),r(URL.createObjectURL(N)))};a.useEffect(()=>{p&&V()},[p]);const V=async()=>{u(!0),j(null);const v=z(_),N=new Date().getTime()+p.name,M=B(v,N),se=Y(M,p);se.on("state_changed",L=>{const fe=L.bytesTransferred/L.totalBytes*100;h(fe.toFixed(0))},L=>{j("Could not upload image (File must be less than 2MB)"),h(null),l(null),r(null),u(!1)},()=>{H(se.snapshot.ref).then(L=>{r(L),P({...b,profilePicture:L}),u(!1)})})},S=v=>{P({...b,[v.target.id]:v.target.value})},G=async v=>{if(v.preventDefault(),g(null),x(null),Object.keys(b).length===0){g("No changes made");return}if(s){g("Please wait for image to upload");return}try{T(Xe());const N=await fetch(`/api/user/update/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),M=await N.json();N.ok?(T(Ze(M)),x("User's profile updated successfully")):(T(ae(M.message)),g(M.message))}catch(N){T(ae(N.message)),g(N.message)}},J=async()=>{w(!1);try{T(et());const v=await fetch(`/api/user/delete/${t._id}`,{method:"DELETE"}),N=await v.json();v.ok?T(tt(N)):T(re(N.message))}catch(v){T(re(v.message))}},Q=async()=>{try{const v=await fetch("/api/user/signout",{method:"POST"}),N=await v.json();v.ok?T(te()):console.log(N.message)}catch(v){console.log(v.message)}};return e.jsxs("div",{className:"max-w-lg mx-auto p-3 w-full",children:[e.jsx("h1",{className:"my-7 text-center font-semibold text-3xl",children:"Profile"}),e.jsxs("form",{onSubmit:G,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:q,ref:R,hidden:!0}),e.jsxs("div",{className:"relative w-32 h-32 self-center cursor-pointer shadow-md overflow-hidden rounded-full",onClick:()=>R.current.click(),children:[m&&e.jsx(F,{value:m||0,text:`${m}%`,strokeWidth:5,styles:{root:{width:"100%",height:"100%",position:"absolute",top:0,left:0},path:{stroke:`rgba(62, 152, 199, ${m/100})`}}}),e.jsx("img",{src:o||t.profilePicture,alt:"user",className:`rounded-full w-full h-full object-cover border-8 border-light-gray ${m&&m<100&&"opacity-60"}`})]}),f&&e.jsx("div",{className:"text-red-500",children:f}),e.jsx("input",{type:"text",id:"username",placeholder:"Username",defaultValue:t.username,onChange:S,className:"border p-2 rounded"}),e.jsx("input",{type:"email",id:"email",placeholder:"Email",defaultValue:t.email,onChange:S,className:"border p-2 rounded"}),e.jsx("input",{type:"password",id:"password",placeholder:"Password",onChange:S,className:"border p-2 rounded"}),e.jsx("button",{type:"submit",className:`w-full py-2 rounded ${n||s?"bg-gray-500":"bg-gradient-to-r from-purple-500 to-blue-500 text-white"} hover:bg-gradient-to-l`,disabled:n||s,children:n?"Loading...":"Update"}),t.isAdmin&&e.jsxs(e.Fragment,{children:[e.jsx(k,{to:"/create-post",children:e.jsx("button",{className:"w-full py-2 rounded bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:bg-gradient-to-l",children:"Create a Post"})}),e.jsx(k,{to:"/create-video",children:e.jsx("button",{className:"w-full py-2 rounded bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:bg-gradient-to-l",children:"Upload a Video"})})]})]}),e.jsxs("div",{className:"text-red-500 flex justify-between mt-5",children:[e.jsx("span",{onClick:()=>w(!0),className:"cursor-pointer",children:"Delete Account"}),e.jsx("span",{onClick:Q,className:"cursor-pointer",children:"Sign Out"})]}),i&&e.jsx("div",{className:"mt-5 p-4 bg-green-100 text-green-800 border border-green-200 rounded",children:i}),c&&e.jsx("div",{className:"mt-5 p-4 bg-red-100 text-red-800 border border-red-200 rounded",children:c}),d&&e.jsx("div",{className:"mt-5 p-4 bg-red-100 text-red-800 border border-red-200 rounded",children:d}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-14 w-14 text-gray-400 dark:text-gray-200 mb-4 mx-auto"}),e.jsx("h3",{className:"mb-5 text-lg text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete your account?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:J,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Yes, I'm sure"}),e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"No, cancel"})]})]})})})]})}function nt(){const{currentUser:t}=U(s=>s.user),[d,n]=a.useState([]),[p,l]=a.useState(!0),[o,r]=a.useState(!1),[m,h]=a.useState("");a.useEffect(()=>{const s=async()=>{try{const u=await fetch(`/api/post/getposts?userId=${t._id}`),i=await u.json();u.ok&&(n(i.posts),i.posts.length<9&&l(!1))}catch(u){console.log(u.message)}};t.isAdmin&&s()},[t._id]);const f=async()=>{const s=d.length;try{const u=await fetch(`/api/post/getposts?userId=${t._id}&startIndex=${s}`),i=await u.json();u.ok&&(n(x=>[...x,...i.posts]),i.posts.length<9&&l(!1))}catch(u){console.log(u.message)}},j=async()=>{r(!1);try{const s=await fetch(`/api/post/deletepost/${m}/${t._id}`,{method:"DELETE"}),u=await s.json();s.ok?n(i=>i.filter(x=>x._id!==m)):console.log(u.message)}catch(s){console.log(s.message)}};return e.jsxs("div",{className:"p-3 md:mx-auto overflow-x-auto",children:[t.isAdmin&&d.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"shadow-md border border-gray-200 dark:border-gray-700 rounded-md overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date Updated"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Post Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Post Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Delete"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Edit"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:new Date(s.updatedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(k,{to:`/post/${s.slug}`,children:e.jsx("img",{src:s.image,alt:s.title,className:"w-20 h-10 object-cover bg-gray-500"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(k,{className:"font-medium text-gray-900 dark:text-white",to:`/post/${s.slug}`,children:s.title})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{r(!0),h(s._id)},className:"text-red-500 hover:underline",children:"Delete"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(k,{className:"text-teal-500 hover:underline",to:`/update-post/${s._id}`,children:"Edit"})})]},s._id))})]})}),p&&e.jsx("button",{onClick:f,className:"w-full text-teal-500 text-sm py-4 mt-4",children:"Show more"})]}):e.jsx("p",{children:"You have no posts yet!"}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-14 w-14 text-gray-400 dark:text-gray-200 mb-4 mx-auto"}),e.jsx("h3",{className:"mb-5 text-lg text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this post?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Yes, I'm sure"}),e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"No, cancel"})]})]})})})]})}function it(){const{currentUser:t}=U(s=>s.user),[d,n]=a.useState([]),[p,l]=a.useState(!0),[o,r]=a.useState(!1),[m,h]=a.useState("");a.useEffect(()=>{const s=async()=>{try{const u=await fetch("/api/user/getusers"),i=await u.json();u.ok&&(n(i.users),i.users.length<9&&l(!1))}catch(u){console.log(u.message)}};t.isAdmin&&s()},[t._id]);const f=async()=>{const s=d.length;try{const u=await fetch(`/api/user/getusers?startIndex=${s}`),i=await u.json();u.ok&&(n(x=>[...x,...i.users]),i.users.length<9&&l(!1))}catch(u){console.log(u.message)}},j=async()=>{try{const s=await fetch(`/api/user/delete/${m}`,{method:"DELETE"}),u=await s.json();s.ok?(n(i=>i.filter(x=>x._id!==m)),r(!1)):console.log(u.message)}catch(s){console.log(s.message)}};return e.jsxs("div",{className:"p-3",children:[t.isAdmin&&d.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Username"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Admin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Delete"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsx("img",{src:s.profilePicture,alt:s.username,className:"w-10 h-10 object-cover bg-gray-500 rounded-full"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:s.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:s.isAdmin?e.jsx(Pe,{className:"text-green-500"}):e.jsx(Ue,{className:"text-red-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 dark:text-red-400",children:e.jsx("span",{onClick:()=>{r(!0),h(s._id)},className:"cursor-pointer hover:underline",children:"Delete"})})]},s._id))})]})}),p&&e.jsx("button",{onClick:f,className:"w-full text-teal-500 text-sm py-7 hover:underline",children:"Show more"})]}):e.jsx("p",{children:"You have no users yet!"}),o&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:e.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(E,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(E,{className:"h-14 w-14 text-gray-400 dark:text-gray-200 mb-4 mx-auto"}),e.jsx("h3",{className:"mb-5 text-lg text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this user?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:j,className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600",children:"Yes, I'm sure"}),e.jsx("button",{onClick:()=>r(!1),className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-300 px-4 py-2 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"No, cancel"})]})]})]}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50"})]})]})}function dt(){const{currentUser:t}=U(s=>s.user),[d,n]=a.useState([]),[p,l]=a.useState(!0),[o,r]=a.useState(!1),[m,h]=a.useState("");a.useEffect(()=>{const s=async()=>{try{const u=await fetch("/api/comment/getcomments"),i=await u.json();u.ok&&(n(i.comments),i.comments.length<9&&l(!1))}catch(u){console.log(u.message)}};t.isAdmin&&s()},[t._id]);const f=async()=>{const s=d.length;try{const u=await fetch(`/api/comment/getcomments?startIndex=${s}`),i=await u.json();u.ok&&(n(x=>[...x,...i.comments]),i.comments.length<9&&l(!1))}catch(u){console.log(u.message)}},j=async()=>{r(!1);try{const s=await fetch(`/api/comment/deleteComment/${m}`,{method:"DELETE"}),u=await s.json();s.ok?n(i=>i.filter(x=>x._id!==m)):console.log(u.message)}catch(s){console.log(s.message)}};return e.jsxs("div",{className:"p-3 md:mx-auto overflow-x-auto",children:[t.isAdmin&&d.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"shadow-md border border-gray-200 dark:border-gray-700 rounded-md overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date Updated"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Comment Content"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Number of Likes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Post ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Delete"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:new Date(s.updatedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:s.content}),e.jsx("td",{className:"px-6 py-4",children:s.numberOfLikes}),e.jsx("td",{className:"px-6 py-4",children:s.postId}),e.jsx("td",{className:"px-6 py-4",children:s.userId}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{r(!0),h(s._id)},className:"text-red-500 hover:underline",children:"Delete"})})]},s._id))})]})}),p&&e.jsx("button",{onClick:f,className:"w-full text-teal-500 text-sm py-4 mt-4",children:"Show more"})]}):e.jsx("p",{children:"You have no comments yet!"}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-14 w-14 text-gray-400 dark:text-gray-200 mb-4 mx-auto"}),e.jsx("h3",{className:"mb-5 text-lg text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this comment?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Yes, I'm sure"}),e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"No, cancel"})]})]})})})]})}function ct(){const[t,d]=a.useState([]),[n,p]=a.useState([]),[l,o]=a.useState([]),[r,m]=a.useState([]),[h,f]=a.useState(0),[j,s]=a.useState(0),[u,i]=a.useState(0),[x,c]=a.useState(0),[g,y]=a.useState(0),[w,b]=a.useState(0),[P,R]=a.useState(0),[T,q]=a.useState(0),{currentUser:V}=U(S=>S.user);return a.useEffect(()=>{const S=async()=>{try{const v=await fetch("/api/user/getusers?limit=5"),N=await v.json();v.ok&&(d(N.users),f(N.totalUsers),y(N.lastMonthUsers))}catch(v){console.log(v.message)}},G=async()=>{try{const v=await fetch("/api/post/getposts?limit=5"),N=await v.json();v.ok&&(o(N.posts),s(N.totalPosts),b(N.lastMonthPosts))}catch(v){console.log(v.message)}},J=async()=>{try{const v=await fetch("/api/video/getvideos?limit=5"),N=await v.json();v.ok&&(m(N.videos),i(N.totalVideos),R(N.lastMonthVideos))}catch(v){console.log(v.message)}},Q=async()=>{try{const v=await fetch("/api/comment/getcomments?limit=5"),N=await v.json();v.ok&&(p(N.comments),c(N.totalComments),q(N.lastMonthComments))}catch(v){console.log(v.message)}};V.isAdmin&&(S(),G(),J(),Q())},[V]),e.jsxs("div",{className:"p-3 md:mx-auto",children:[e.jsxs("div",{className:"flex-wrap flex gap-4 justify-center",children:[e.jsxs("div",{className:"flex flex-col p-3 dark:bg-slate-800 gap-4 md:w-72 w-full rounded-md shadow-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 text-md uppercase",children:"Total Users"}),e.jsx("p",{className:"text-2xl",children:h})]}),e.jsx(ne,{className:"bg-teal-600 text-white rounded-full text-5xl p-3 shadow-lg"})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-500 flex items-center",children:[e.jsx(O,{}),g]}),e.jsx("div",{className:"text-gray-500",children:"Last month"})]})]}),e.jsxs("div",{className:"flex flex-col p-3 dark:bg-slate-800 gap-4 md:w-72 w-full rounded-md shadow-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 text-md uppercase",children:"Total Comments"}),e.jsx("p",{className:"text-2xl",children:x})]}),e.jsx(ie,{className:"bg-indigo-600 text-white rounded-full text-5xl p-3 shadow-lg"})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-500 flex items-center",children:[e.jsx(O,{}),T]}),e.jsx("div",{className:"text-gray-500",children:"Last month"})]})]}),e.jsxs("div",{className:"flex flex-col p-3 dark:bg-slate-800 gap-4 md:w-72 w-full rounded-md shadow-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 text-md uppercase",children:"Total Posts"}),e.jsx("p",{className:"text-2xl",children:j})]}),e.jsx(A,{className:"bg-lime-600 text-white rounded-full text-5xl p-3 shadow-lg"})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-500 flex items-center",children:[e.jsx(O,{}),w]}),e.jsx("div",{className:"text-gray-500",children:"Last month"})]})]}),e.jsxs("div",{className:"flex flex-col p-3 dark:bg-slate-800 gap-4 md:w-72 w-full rounded-md shadow-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 text-md uppercase",children:"Total Videos"}),e.jsx("p",{className:"text-2xl",children:u})]}),e.jsx(A,{className:"bg-red-400 text-white rounded-full text-5xl p-3 shadow-lg"})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-500 flex items-center",children:[e.jsx(O,{}),P]}),e.jsx("div",{className:"text-gray-500",children:"Last month"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 py-3 mx-auto justify-center",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-auto shadow-md p-2 rounded-md dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between p-3 text-sm font-semibold",children:[e.jsx("h1",{className:"text-center p-2",children:"Recent Users"}),e.jsx(k,{to:"/dashboard?tab=users",children:e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded hover:opacity-80",children:"See all"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Username"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(S=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("img",{src:S.profilePicture,alt:"user",className:"w-10 h-10 rounded-full bg-gray-500"})}),e.jsx("td",{className:"px-6 py-4",children:S.username})]},S._id))})]})})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-auto shadow-md p-2 rounded-md dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between p-3 text-sm font-semibold",children:[e.jsx("h1",{className:"text-center p-2",children:"Recent Comments"}),e.jsx(k,{to:"/dashboard?tab=comments",children:e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded hover:opacity-80",children:"See all"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Comment Content"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Likes"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.map(S=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"line-clamp-2",children:S.content})}),e.jsx("td",{className:"px-6 py-4",children:S.numberOfLikes})]},S._id))})]})})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-auto shadow-md p-2 rounded-md dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between p-3 text-sm font-semibold",children:[e.jsx("h1",{className:"text-center p-2",children:"Recent Posts"}),e.jsx(k,{to:"/dashboard?tab=posts",children:e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded hover:opacity-80",children:"See all"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Post Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Post Title"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l.map(S=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("img",{src:S.image,alt:"post",className:"w-14 h-10 rounded-md bg-gray-500"})}),e.jsx("td",{className:"px-6 py-4 w-96",children:S.title})]},S._id))})]})})]})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-auto shadow-md p-2 rounded-md dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between p-3 text-sm font-semibold",children:[e.jsx("h1",{className:"text-center p-2",children:"Recent Videos"}),e.jsx(k,{to:"/dashboard?tab=videos",children:e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded hover:opacity-80",children:"See all"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Video Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Video Title"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map(S=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("img",{src:S.image,alt:"video",className:"w-14 h-10 rounded-md bg-gray-500"})}),e.jsx("td",{className:"px-6 py-4 w-96",children:S.title})]},S._id))})]})})]})]})}function mt(){const{currentUser:t}=U(s=>s.user),[d,n]=a.useState([]),[p,l]=a.useState(!0),[o,r]=a.useState(!1),[m,h]=a.useState("");a.useEffect(()=>{const s=async()=>{try{const u=await fetch(`/api/video/getvideos?userId=${t._id}`),i=await u.json();u.ok&&(n(i.videos),i.videos.length<9&&l(!1))}catch(u){console.log(u.message)}};t.isAdmin&&s()},[t._id]);const f=async()=>{const s=d.length;try{const u=await fetch(`/api/video/getvideos?userId=${t._id}&startIndex=${s}`),i=await u.json();u.ok&&(n(x=>[...x,...i.videos]),i.videos.length<9&&l(!1))}catch(u){console.log(u.message)}},j=async()=>{r(!1);try{const s=await fetch(`/api/video/deletevideo/${m}/${t._id}`,{method:"DELETE"}),u=await s.json();s.ok?n(i=>i.filter(x=>x._id!==m)):console.log(u.message)}catch(s){console.log(s.message)}};return e.jsxs("div",{className:"p-3 md:mx-auto overflow-x-auto",children:[t.isAdmin&&d.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"shadow-md border border-gray-200 dark:border-gray-700 rounded-md overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date Updated"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Video Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Video Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Delete"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Edit"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:new Date(s.updatedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(k,{to:`/video/${s.slug}`,children:e.jsx("img",{src:s.image,alt:s.title,className:"w-20 h-10 object-cover bg-gray-500"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(k,{className:"font-medium text-gray-900 dark:text-white",to:`/video/${s.slug}`,children:s.title})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{r(!0),h(s._id)},className:"text-red-500 hover:underline",children:"Delete"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(k,{className:"text-teal-500 hover:underline",to:`/update-video/${s._id}`,children:"Edit"})})]},s._id))})]})}),p&&e.jsx("button",{onClick:f,className:"w-full text-teal-500 text-sm py-4 mt-4",children:"Show more"})]}):e.jsx("p",{children:"You have no videos yet!"}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-14 w-14 text-gray-400 dark:text-gray-200 mb-4 mx-auto"}),e.jsx("h3",{className:"mb-5 text-lg text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this video?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Yes, I'm sure"}),e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"No, cancel"})]})]})})})]})}function xt(){const t=I(),[d,n]=a.useState("");return a.useEffect(()=>{const l=new URLSearchParams(t.search).get("tab");l&&n(l)},[t.search]),e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-56",children:e.jsx(lt,{})}),d==="profile"&&e.jsx(ot,{}),d==="posts"&&e.jsx(nt,{}),d==="videos"&&e.jsx(mt,{}),d==="users"&&e.jsx(it,{}),d==="comments"&&e.jsx(dt,{}),d==="dash"&&e.jsx(ct,{})]})}function ht(){const[t,d]=a.useState({}),[n,p]=a.useState(null),[l,o]=a.useState(!1),r=D(),m=f=>{d({...t,[f.target.id]:f.target.value.trim()})},h=async f=>{if(f.preventDefault(),!t.username||!t.email||!t.password)return p("Please fill out all fields.");try{o(!0),p(null);const j=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await j.json();if(s.success===!1)return p(s.message);o(!1),j.ok&&r("/sign-in")}catch(j){p(j.message),o(!1)}};return e.jsx("div",{className:"min-h-screen mt-20",children:e.jsxs("div",{className:"flex p-3 max-w-3xl mx-auto flex-col md:flex-row md:items-center gap-5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(k,{to:"/",className:"font-bold text-4xl dark:text-white",children:[e.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-lg text-white",children:"Sahand's"}),"Blog"]}),e.jsx("p",{className:"text-sm mt-5",children:"This is a demo project. You can sign up with your email and password or with Google."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:h,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold mb-1",children:"Your username"}),e.jsx("input",{type:"text",id:"username",placeholder:"Username",onChange:m,className:"border rounded-md p-2 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold mb-1",children:"Your email"}),e.jsx("input",{type:"email",id:"email",placeholder:"name@company.com",onChange:m,className:"border rounded-md p-2 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold mb-1",children:"Your password"}),e.jsx("input",{type:"password",id:"password",placeholder:"Password",onChange:m,className:"border rounded-md p-2 w-full"})]}),e.jsx("button",{type:"submit",disabled:l,className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-md flex items-center justify-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"animate-spin h-5 w-5 mr-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1H5a1 1 0 01-1-1V6zM4 10a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1H5a1 1 0 01-1-1v-1zM4 14a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1H5a1 1 0 01-1-1v-1zM10 6a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1V6zM10 10a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1zM10 14a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1zM16 6a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1V6zM16 10a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1zM16 14a1 1 0 011-1h1a1 1 0 011 1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1v-1z"})}),e.jsx("span",{children:"Loading..."})]}):"Sign Up"}),e.jsx(ue,{})]}),e.jsxs("div",{className:"flex gap-2 text-sm mt-5",children:[e.jsx("span",{children:"Have an account?"}),e.jsx(k,{to:"/sign-in",className:"text-blue-500",children:"Sign In"})]}),n&&e.jsx("div",{className:"mt-5 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:n})]})]})})}const ut={theme:"light"},ge=oe({name:"theme",initialState:ut,reducers:{toggleTheme:t=>{t.theme=t.theme==="light"?"dark":"light"}}}),{toggleTheme:gt}=ge.actions,pt=ge.reducer;function ft(){const t=I().pathname,d=I(),n=D(),p=$(),{currentUser:l}=U(x=>x.user),{theme:o}=U(x=>x.theme),[r,m]=a.useState(""),h=a.useRef(null),f=a.useRef(null);a.useEffect(()=>{const c=new URLSearchParams(d.search).get("searchTerm");c&&m(c)},[d.search]),a.useEffect(()=>{K.set(h.current,{opacity:0,pointerEvents:"none"})},[]);const j=async()=>{try{const x=await fetch("/api/user/signout",{method:"POST"}),c=await x.json();x.ok?p(te()):console.log(c.message)}catch(x){console.log(x.message)}},s=x=>{x.preventDefault();const c=new URLSearchParams(d.search);c.set("searchTerm",r);const g=c.toString();n(`/search?${g}`)},u=()=>{K.to(h.current,{opacity:1,pointerEvents:"auto",duration:.3})},i=()=>{K.to(h.current,{opacity:0,pointerEvents:"none",duration:.3})};return e.jsx("header",{className:"bg-white dark:bg-gray-900 border-b-2 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-[90%] mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsxs(k,{to:"/",className:"flex items-center",children:[e.jsx("img",{className:"w-[50px]",src:"https://firebasestorage.googleapis.com/v0/b/projects-images.appspot.com/o/logo-(1).png?alt=media&token=fd468f51-42a9-488a-8b93-0582a7ee8389"}),e.jsx("span",{className:"text-2xl",children:"Quote Rider"})]}),e.jsxs("form",{onSubmit:s,className:"flex items-center flex-grow max-w-xs",children:[e.jsx("input",{type:"text",placeholder:"Search...",className:"hidden lg:block w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-700 dark:bg-gray-800 dark:text-white",value:r,onChange:x=>m(x.target.value)}),e.jsx("button",{type:"submit",className:"lg:hidden w-12 h-10 flex items-center justify-center text-gray-500 dark:text-gray-400",children:e.jsx(Ce,{})})]}),e.jsx("nav",{className:"",children:e.jsxs("ul",{className:"flex space-x-4 gap-9",children:[e.jsx("li",{children:e.jsx(k,{to:"/",className:`text-gray-700 dark:text-gray-300 ${t==="/"?"font-semibold":""}`,children:"Home"})}),e.jsx("li",{children:e.jsx(k,{to:"/about",className:`text-gray-700 dark:text-gray-300 ${t==="/about"?"font-semibold":""}`,children:"About"})}),e.jsx("li",{children:e.jsx(k,{to:"/all-posts",className:`text-gray-700 dark:text-gray-300 ${t==="/projects"?"font-semibold":""}`,children:"Posts"})}),e.jsx("li",{children:e.jsx(k,{to:"/all-videos",className:`text-gray-700 dark:text-gray-300 ${t==="/projects"?"font-semibold":""}`,children:"Videos"})})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>p(gt()),className:"w-12 h-10 flex items-center justify-center text-gray-500 dark:text-gray-400",children:o==="light"?e.jsx(Te,{}):e.jsx(De,{})}),l?e.jsxs("div",{className:"relative",onMouseEnter:u,onMouseLeave:i,children:[e.jsx("button",{ref:f,className:"flex items-center",children:e.jsx("img",{src:l.profilePicture,alt:"user",className:"w-10 h-10 rounded-full object-cover"})}),e.jsxs("div",{ref:h,className:"absolute right-0 top-8 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg",children:[e.jsxs("div",{className:"px-4 py-2",children:[e.jsxs("span",{className:"block text-sm text-gray-900 dark:text-white",children:["@",l.username]}),e.jsx("span",{className:"block text-sm text-gray-500 dark:text-gray-400",children:l.email})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700",children:[e.jsx(k,{to:"/dashboard?tab=profile",children:e.jsx("button",{className:"w-full text-left px-4 py-2 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Profile"})}),e.jsx("button",{onClick:j,className:"w-full text-left px-4 py-2 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sign out"})]})]})]}):e.jsx(k,{to:"/sign-in",children:e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-md",children:"Sign In"})})]})]})})}function jt(){return e.jsx("footer",{className:"border-t-8 border-teal-500 bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-8 px-4",children:[e.jsx("hr",{className:"my-6 border-gray-300 dark:border-gray-700"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," ",e.jsx(k,{to:"/",className:"text-teal-500 hover:underline",children:"Quote Rider"}),". All rights reserved."]}),e.jsxs("div",{className:"flex gap-6 mt-4 sm:mt-0",children:[e.jsx("a",{href:"#",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:e.jsx(Ee,{className:"h-6 w-6"})}),e.jsx("a",{href:"#",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:e.jsx(Ie,{className:"h-6 w-6"})}),e.jsx("a",{href:"#",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:e.jsx(Le,{className:"h-6 w-6"})}),e.jsx("a",{href:"https://github.com/aayush-agarwal-07?tab=overview&from=2024-07-01&to=2024-07-26",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:e.jsx(Fe,{className:"h-6 w-6"})}),e.jsx("a",{href:"#",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:e.jsx(Me,{className:"h-6 w-6"})})]})]})]})})}function yt(){const{currentUser:t}=U(d=>d.user);return t?e.jsx(de,{}):e.jsx(ce,{to:"/sign-in"})}function le(){const{currentUser:t}=U(d=>d.user);return t&&t.isAdmin?e.jsx(de,{}):e.jsx(ce,{to:"/sign-in"})}function bt(){const[t,d]=a.useState(null),[n,p]=a.useState(null),[l,o]=a.useState(null),[r,m]=a.useState({}),[h,f]=a.useState(null),j=D(),s=async()=>{try{if(!t){o("Please select an image");return}o(null);const i=z(_),x=new Date().getTime()+"-"+t.name,c=B(i,x),g=Y(c,t);g.on("state_changed",y=>{const w=y.bytesTransferred/y.totalBytes*100;p(w.toFixed(0))},y=>{o("Image upload failed"),p(null)},()=>{H(g.snapshot.ref).then(y=>{p(null),o(null),m({...r,image:y})})})}catch(i){o("Image upload failed"),p(null),console.log(i)}},u=async i=>{i.preventDefault();try{const x=await fetch("/api/post/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),c=await x.json();if(!x.ok){f(c.message);return}x.ok&&(f(null),j(`/post/${c.slug}`))}catch{f("Something went wrong")}};return e.jsxs("div",{className:"p-4 max-w-3xl mx-auto min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center my-8",children:"Create a Post"}),e.jsxs("form",{className:"space-y-6",onSubmit:u,children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("input",{type:"text",placeholder:"Title",required:!0,className:"flex-1 p-2 border border-gray-300 rounded",onChange:i=>m({...r,title:i.target.value})})}),e.jsxs("div",{className:"border-4 border-dotted border-teal-500 p-4 flex items-center gap-4",children:[e.jsx("input",{type:"file",accept:"image/*",className:"p-2",onChange:i=>d(i.target.files[0])}),e.jsx("button",{type:"button",onClick:s,disabled:n,className:"flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg shadow-md hover:from-purple-600 hover:to-blue-600 transition duration-300",children:n?e.jsx("div",{className:"w-16 h-16",children:e.jsx(F,{value:n,text:`${n||0}%`})}):"Upload Image"})]}),l&&e.jsx("div",{className:"text-red-600",children:l}),r.image&&e.jsx("img",{src:r.image,alt:"Upload preview",className:"w-full h-72 object-cover mt-4"}),e.jsx(W,{theme:"snow",placeholder:"Write something...",className:"h-72 mb-6",required:!0,onChange:i=>{m({...r,content:i})}}),e.jsx("button",{type:"submit",className:`mt-4 px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg shadow-md hover:from-purple-600 hover:to-pink-600 transition duration-300 absolute ${r.image?"-bottom-[5%]":"bottom-[26%]"} ${r.image?"-bottom-[5%]":l?"bottom-[21%]":n?"bottom-[24%]":"bottom-[26%]"}`,children:"Publish"}),h&&e.jsx("div",{className:"text-red-600 mt-4",children:h})]})]})}function wt(){const[t,d]=a.useState(null),[n,p]=a.useState(null),[l,o]=a.useState(null),[r,m]=a.useState({}),[h,f]=a.useState(null),{postId:j}=Z(),s=D(),{currentUser:u}=U(c=>c.user);a.useEffect(()=>{(async()=>{try{const g=await fetch(`/api/post/getposts?postId=${j}`),y=await g.json();if(!g.ok){f(y.message);return}m(y.posts[0]),f(null)}catch(g){console.log(g.message)}})()},[j]);const i=async()=>{try{if(!t){o("Please select an image");return}o(null);const c=z(_),g=new Date().getTime()+"-"+t.name,y=B(c,g),w=Y(y,t);w.on("state_changed",b=>{const P=b.bytesTransferred/b.totalBytes*100;p(P.toFixed(0))},b=>{o("Image upload failed"),p(null)},()=>{H(w.snapshot.ref).then(b=>{p(null),o(null),m({...r,image:b})})})}catch(c){o("Image upload failed"),p(null),console.log(c)}},x=async c=>{c.preventDefault();try{const g=await fetch(`/api/post/updatepost/${r._id}/${u._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),y=await g.json();if(!g.ok){f(y.message);return}f(null),s(`/post/${y.slug}`)}catch{f("Something went wrong")}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto min-h-screen",children:[e.jsx("h1",{className:"text-center text-3xl my-7 font-semibold",children:"Update Post"}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:x,children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:gap-6",children:e.jsx("input",{type:"text",placeholder:"Title",required:!0,id:"title",className:"border border-gray-300 rounded-md p-2 flex-1",onChange:c=>m({...r,title:c.target.value}),value:r.title||""})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center border-4 border-teal-500 border-dotted p-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:c=>d(c.target.files[0]),className:"mb-4"}),e.jsx("button",{type:"button",onClick:i,disabled:n,className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white py-2 px-4 rounded-md flex items-center",children:n?e.jsx("div",{className:"w-16 h-16",children:e.jsx(F,{value:n,text:`${n||0}%`})}):"Upload Image"})]}),l&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 rounded p-3",children:l}),r.image&&e.jsx("img",{src:r.image,alt:"Uploaded",className:"w-full h-72 object-cover mt-4"}),e.jsx(W,{theme:"snow",value:r.content||"",placeholder:"Write something...",className:"h-72 mb-12",required:!0,onChange:c=>{m({...r,content:c})}}),e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-md",children:"Update Post"}),h&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 rounded p-3 mt-5",children:h})]})]})}function vt({comment:t,onLike:d,onEdit:n,onDelete:p}){const[l,o]=a.useState({}),[r,m]=a.useState(!1),[h,f]=a.useState(t.content),{currentUser:j}=U(i=>i.user);a.useEffect(()=>{(async()=>{try{const x=await fetch(`/api/user/${t.userId}`),c=await x.json();x.ok&&o(c)}catch(x){console.log(x.message)}})()},[t]);const s=()=>{m(!0),f(t.content)},u=async()=>{try{(await fetch(`/api/comment/editComment/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:h})})).ok&&(m(!1),n(t,h))}catch(i){console.log(i.message)}};return e.jsxs("div",{className:"flex p-4 border-b dark:border-gray-600 text-sm",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:e.jsx("img",{className:"w-10 h-10 rounded-full bg-gray-200",src:l.profilePicture,alt:l.username})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"font-bold mr-1 text-xs truncate",children:l?`@${l.username}`:"anonymous user"}),e.jsx("span",{className:"text-gray-500 text-xs",children:ze(t.createdAt).fromNow()})]}),r?e.jsxs(e.Fragment,{children:[e.jsx("textarea",{className:"mb-2 p-2 border rounded",value:h,onChange:i=>f(i.target.value)}),e.jsxs("div",{className:"flex justify-end gap-2 text-xs",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded hover:opacity-80",onClick:u,children:"Save"}),e.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",onClick:()=>m(!1),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 pb-2",children:t.content}),e.jsxs("div",{className:"flex items-center pt-2 text-xs border-t dark:border-gray-700 max-w-fit gap-2",children:[e.jsx("button",{type:"button",onClick:()=>d(t._id),className:`text-gray-400 hover:text-blue-500 ${j&&t.likes.includes(j._id)&&"!text-blue-500"}`,children:e.jsx($e,{className:"text-sm"})}),e.jsx("p",{className:"text-gray-400",children:t.numberOfLikes>0&&t.numberOfLikes+" "+(t.numberOfLikes===1?"like":"likes")}),j&&(j._id===t.userId||j.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-blue-500",children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>p(t._id),className:"text-gray-400 hover:text-red-500",children:"Delete"})]})]})]})]})]})}function Nt({postId:t}){const{currentUser:d}=U(y=>y.user),[n,p]=a.useState(""),[l,o]=a.useState(null),[r,m]=a.useState([]),[h,f]=a.useState(!1),[j,s]=a.useState(null),u=D(),i=async y=>{if(y.preventDefault(),!(n.length>200))try{const w=await fetch("/api/comment/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n,postId:t,userId:d._id})}),b=await w.json();w.ok&&(p(""),o(null),m([b,...r]))}catch(w){o(w.message)}};a.useEffect(()=>{(async()=>{try{const w=await fetch(`/api/comment/getPostComments/${t}`);if(w.ok){const b=await w.json();m(b)}}catch(w){console.log(w.message)}})()},[t]);const x=async y=>{try{if(!d){u("/sign-in");return}const w=await fetch(`/api/comment/likeComment/${y}`,{method:"PUT"});if(w.ok){const b=await w.json();m(r.map(P=>P._id===y?{...P,likes:b.likes,numberOfLikes:b.likes.length}:P))}}catch(w){console.log(w.message)}},c=async(y,w)=>{m(r.map(b=>b._id===y._id?{...b,content:w}:b))},g=async y=>{f(!1);try{if(!d){u("/sign-in");return}(await fetch(`/api/comment/deleteComment/${y}`,{method:"DELETE"})).ok&&m(r.filter(b=>b._id!==y))}catch(w){console.log(w.message)}};return e.jsxs("div",{className:"max-w-2xl mx-auto w-full p-3",children:[d?e.jsxs("div",{className:"flex items-center gap-1 my-5 text-gray-500 text-sm",children:[e.jsx("p",{children:"Signed in as:"}),e.jsx("img",{className:"h-5 w-5 object-cover rounded-full",src:d.profilePicture,alt:""}),e.jsxs(k,{to:"/dashboard?tab=profile",className:"text-xs text-cyan-600 hover:underline",children:["@",d.username]})]}):e.jsxs("div",{className:"text-sm text-teal-500 my-5 flex gap-1",children:["You must be signed in to comment.",e.jsx(k,{className:"text-blue-500 hover:underline",to:"/sign-in",children:"Sign In"})]}),d&&e.jsxs("form",{onSubmit:i,className:"border border-teal-500 rounded-md p-3",children:[e.jsx("textarea",{placeholder:"Add a comment...",rows:"3",maxLength:"200",onChange:y=>p(y.target.value),value:n,className:"w-full p-2 border rounded"}),e.jsxs("div",{className:"flex justify-between items-center mt-5",children:[e.jsxs("p",{className:"text-gray-500 text-xs",children:[200-n.length," characters remaining"]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded hover:opacity-80",children:"Submit"})]}),l&&e.jsx("div",{className:"mt-5 p-3 border border-red-300 bg-red-100 text-red-700 rounded",children:l})]}),r.length===0?e.jsx("p",{className:"text-sm my-5",children:"No comments yet!"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm my-5 flex items-center gap-1",children:[e.jsx("p",{children:"Comments"}),e.jsx("div",{className:"border border-gray-400 py-1 px-2 rounded-sm",children:e.jsx("p",{children:r.length})})]}),r.map(y=>e.jsx(vt,{comment:y,onLike:x,onEdit:c,onDelete:w=>{f(!0),s(w)}},y._id))]}),h&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-sm mx-auto",children:[e.jsx(E,{className:"h-14 w-14 text-gray-400 mb-4 mx-auto"}),e.jsx("h3",{className:"mb-5 text-lg text-gray-500",children:"Are you sure you want to delete this comment?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{className:"px-4 py-2 bg-red-500 text-white rounded hover:opacity-80",onClick:()=>g(j),children:"Yes, I'm sure"}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",onClick:()=>f(!1),children:"No, cancel"})]})]})})]})}function kt(){const{postSlug:t}=Z(),[d,n]=a.useState(!0),[p,l]=a.useState(!1),[o,r]=a.useState(null),[m,h]=a.useState(null);return a.useEffect(()=>{(async()=>{try{n(!0);const j=await fetch(`/api/post/getposts?slug=${t}`),s=await j.json();if(!j.ok){l(!0),n(!1);return}j.ok&&(r(s.posts[0]),n(!1),l(!1))}catch{l(!0),n(!1)}})()},[t]),a.useEffect(()=>{try{(async()=>{const j=await fetch("/api/post/getposts?limit=3"),s=await j.json();j.ok&&h(s.posts)})()}catch(f){console.log(f.message)}},[]),d?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(F,{value:100,text:"Loading...",strokeWidth:5,styles:{path:{stroke:"#4A90E2"}}})}):e.jsx("main",{className:"p-4 max-w-6xl mx-auto min-h-screen",children:o?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl mt-10 p-3 text-center font-serif max-w-2xl mx-auto lg:text-4xl",children:o.title}),e.jsx("img",{src:o.image,alt:o.title,className:"mt-10 p-3 max-h-[600px] w-full object-cover"}),e.jsxs("div",{className:"flex justify-between p-3 border-b border-slate-500 mx-auto w-full max-w-2xl text-xs",children:[e.jsx("span",{children:new Date(o.createdAt).toLocaleDateString()}),e.jsxs("span",{className:"italic",children:[(o.content.length/1e3).toFixed(0)," mins read"]})]}),e.jsx("div",{className:"p-3 max-w-2xl mx-auto w-full post-content",dangerouslySetInnerHTML:{__html:o.content}}),e.jsx(Nt,{postId:o._id}),e.jsxs("div",{className:"flex flex-col justify-center items-center mb-5",children:[e.jsx("h1",{className:"text-xl mt-5",children:"Recent articles"}),e.jsx("div",{className:"flex flex-wrap gap-5 mt-5 justify-center",children:m&&m.map(f=>e.jsx(ee,{post:f},f._id))})]})]}):e.jsx("div",{className:"text-center text-xl",children:e.jsx("p",{children:"Post not found"})})})}const St=()=>{const{pathname:t}=I();return a.useEffect(()=>{window.scrollTo(0,0)},[t]),null};function Pt(){const[t,d]=a.useState(null),[n,p]=a.useState(null),[l,o]=a.useState(null),[r,m]=a.useState(""),[h,f]=a.useState({}),[j,s]=a.useState(null),u=D(),i=async()=>{try{if(!t){o("Please select a thumbnail");return}o(null);const c=z(_),g=new Date().getTime()+"-"+t.name,y=B(c,g),w=Y(y,t);w.on("state_changed",b=>{const P=b.bytesTransferred/b.totalBytes*100;p(P.toFixed(0))},b=>{o("Thumbnail upload failed"),p(null)},()=>{H(w.snapshot.ref).then(b=>{p(null),o(null),f({...h,thumbnail:b})})})}catch(c){o("Thumbnail upload failed"),p(null),console.log(c)}},x=async c=>{c.preventDefault();try{const g=await fetch("/api/video/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,videoUrl:r})}),y=await g.json();if(!g.ok){s(y.message);return}g.ok&&(s(null),u("/all-videos"))}catch{s("Something went wrong")}};return e.jsxs("div",{className:"p-4 max-w-3xl mx-auto min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center my-8",children:"Create a Video"}),e.jsxs("form",{className:"space-y-6",onSubmit:x,children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("input",{type:"text",placeholder:"Title",required:!0,className:"flex-1 p-2 border border-gray-300 rounded",onChange:c=>f({...h,title:c.target.value})})}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("input",{type:"text",placeholder:"Video URL",required:!0,className:"flex-1 p-2 border border-gray-300 rounded",onChange:c=>m(c.target.value)})}),e.jsxs("div",{className:"border-4 border-dotted border-teal-500 p-4 flex items-center gap-4 relative",children:[e.jsx("input",{type:"file",accept:"image/*",className:"p-2",onChange:c=>d(c.target.files[0])}),e.jsx("button",{type:"button",onClick:i,disabled:n,className:"flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg shadow-md hover:from-purple-600 hover:to-blue-600 transition duration-300",children:n?e.jsx("div",{className:"w-16 h-16",children:e.jsx(F,{value:n,text:`${n||0}%`})}):"Upload Thumbnail"})]}),l&&e.jsx("div",{className:"text-red-600",children:l}),h.thumbnail&&e.jsx("img",{src:h.thumbnail,alt:"Upload preview",className:"w-full h-72 object-contain mt-4"}),e.jsx(W,{theme:"snow",placeholder:"Write something...",className:"h-48",required:!0,onChange:c=>{f({...h,content:c})}}),e.jsx("button",{type:"submit",className:`mt-4 px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg shadow-md hover:from-purple-600 hover:to-pink-600 transition duration-300 absolute ${h.thumbnail?"-bottom-[5%]":"bottom-[26%]"} ${h.thumbnail?"-bottom-[5%]":l?"bottom-[21%]":n?"bottom-[24%]":"bottom-[26%]"}`,children:"Publish"}),j&&e.jsx("div",{className:"text-red-600 mt-4",children:j})]})]})}function Ut(){const[t,d]=a.useState(null),[n,p]=a.useState(null),[l,o]=a.useState(null),[r,m]=a.useState({}),[h,f]=a.useState(null),{videoId:j}=Z(),s=D(),{currentUser:u}=U(c=>c.user);a.useEffect(()=>{(async()=>{try{const g=await fetch(`/api/video/getvideos?videoId=${j}`),y=await g.json();if(!g.ok){f(y.message);return}m(y.videos[0]),f(null)}catch(g){console.log(g.message)}})()},[j]);const i=async()=>{try{if(!t){o("Please select a thumbnail");return}o(null);const c=getStorage(app),g=new Date().getTime()+"-"+t.name,y=ref(c,g),w=uploadBytesResumable(y,t);w.on("state_changed",b=>{const P=b.bytesTransferred/b.totalBytes*100;p(P.toFixed(0))},b=>{o("Thumbnail upload failed"),p(null)},()=>{getDownloadURL(w.snapshot.ref).then(b=>{p(null),o(null),m({...r,thumbnail:b})})})}catch(c){o("Thumbnail upload failed"),p(null),console.log(c)}},x=async c=>{c.preventDefault();try{const g=await fetch(`/api/video/updatevideo/${r._id}/${u._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),y=await g.json();if(!g.ok){f(y.message);return}f(null),s(`/video/${y.slug}`)}catch{f("Something went wrong")}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto min-h-screen",children:[e.jsx("h1",{className:"text-center text-3xl my-7 font-semibold",children:"Update Video"}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:x,children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:gap-6",children:e.jsx("input",{type:"text",placeholder:"Title",required:!0,id:"title",className:"border border-gray-300 rounded-md p-2 flex-1",onChange:c=>m({...r,title:c.target.value}),value:r.title||""})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center border-4 border-teal-500 border-dotted p-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:c=>d(c.target.files[0]),className:"mb-4"}),e.jsx("button",{type:"button",onClick:i,disabled:n,className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white py-2 px-4 rounded-md flex items-center",children:n?e.jsx("div",{className:"w-16 h-16",children:e.jsx(F,{value:n,text:`${n||0}%`})}):"Upload Thumbnail"})]}),l&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 rounded p-3",children:l}),r.thumbnail&&e.jsx("img",{src:r.thumbnail,alt:"Uploaded",className:"w-full h-72 object-cover mt-4"}),e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:gap-6",children:e.jsx("input",{type:"text",placeholder:"YouTube Video URL",required:!0,id:"video",className:"border border-gray-300 rounded-md p-2 flex-1",onChange:c=>m({...r,video:c.target.value}),value:r.video||""})}),r.video&&e.jsx("div",{className:"w-full h-72 mt-4",children:e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${r.video.split("v=")[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video player"})}),e.jsx(W,{theme:"snow",value:r.content||"",placeholder:"Write something...",className:"h-72 mb-12",required:!0,onChange:c=>{m({...r,content:c})}}),e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-md",children:"Update Video"}),h&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 rounded p-3 mt-5",children:h})]})]})}function Ct(){const[t,d]=a.useState({searchTerm:"",sort:"desc"}),[n,p]=a.useState([]),[l,o]=a.useState(!1),[r,m]=a.useState(!1),h=I(),f=D();a.useEffect(()=>{const i=async()=>{o(!0);const w=new URLSearchParams(h.search).toString();try{const b=await fetch(`/api/post/getposts?${w}`);if(!b.ok){o(!1);return}const P=await b.json();p(P.posts),o(!1),P.posts.length===9?m(!0):m(!1)}catch(b){o(!1),console.error(b)}},x=new URLSearchParams(h.search),c=x.get("searchTerm"),g=x.get("sort");(c||g)&&d({searchTerm:c||"",sort:g||"desc"}),i()},[h.search]);const j=i=>{const{id:x,value:c}=i.target;d(g=>({...g,[x]:c}))},s=i=>{i.preventDefault();const x=new URLSearchParams;Object.entries(t).forEach(([c,g])=>{g&&x.set(c,g)}),f(`/search?${x.toString()}`)},u=async()=>{const i=n.length,x=new URLSearchParams(h.search);x.set("startIndex",i);const c=x.toString();try{const g=await fetch(`/api/post/getposts?${c}`);if(!g.ok)return;const y=await g.json();p(w=>[...w,...y.posts]),m(y.posts.length===9)}catch(g){console.error(g)}};return e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"p-7 border-b md:border-r md:min-h-screen border-gray-500",children:e.jsxs("form",{className:"flex flex-col gap-8",onSubmit:s,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"whitespace-nowrap font-semibold",children:"Search Term:"}),e.jsx("input",{placeholder:"Search...",id:"searchTerm",type:"text",value:t.searchTerm,onChange:j,className:"border rounded-md p-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-semibold",children:"Sort:"}),e.jsxs("select",{onChange:j,value:t.sort,id:"sort",className:"border rounded-md p-2",children:[e.jsx("option",{value:"desc",children:"Latest"}),e.jsx("option",{value:"asc",children:"Oldest"})]})]}),e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-md",children:"Apply Filters"})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-3xl font-semibold sm:border-b border-gray-500 p-3 mt-5",children:"Posts results:"}),e.jsxs("div",{className:"p-7 flex flex-wrap gap-4",children:[l&&e.jsx("p",{className:"text-xl text-gray-500",children:"Loading..."}),!l&&n.length===0&&e.jsx("p",{className:"text-xl text-gray-500",children:"No posts found."}),!l&&n.map(i=>e.jsx(ee,{post:i},i._id)),r&&e.jsx("button",{onClick:u,className:"text-teal-500 text-lg hover:underline p-7 w-full",children:"Show More"})]})]})]})}function Tt(){const[t,d]=a.useState({searchTerm:"",sort:"desc"}),[n,p]=a.useState([]),[l,o]=a.useState(!1),[r,m]=a.useState(!1),h=I(),f=D();a.useEffect(()=>{const i=async()=>{o(!0);const w=new URLSearchParams(h.search).toString();try{const b=await fetch(`/api/video/getvideos?${w}`);if(!b.ok){o(!1);return}const P=await b.json();p(P.videos),o(!1),P.videos.length===9?m(!0):m(!1)}catch(b){o(!1),console.error(b)}},x=new URLSearchParams(h.search),c=x.get("searchTerm"),g=x.get("sort");(c||g)&&d({searchTerm:c||"",sort:g||"desc"}),i()},[h.search]);const j=i=>{const{id:x,value:c}=i.target;d(g=>({...g,[x]:c}))},s=i=>{i.preventDefault();const x=new URLSearchParams;Object.entries(t).forEach(([c,g])=>{g&&x.set(c,g)}),f(`/search?${x.toString()}`)},u=async()=>{const i=n.length,x=new URLSearchParams(h.search);x.set("startIndex",i);const c=x.toString();try{const g=await fetch(`/api/video/getvideos?${c}`);if(!g.ok)return;const y=await g.json();p(w=>[...w,...y.videos]),m(y.videos.length===9)}catch(g){console.error(g)}};return e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"p-7 border-b md:border-r md:min-h-screen border-gray-500",children:e.jsxs("form",{className:"flex flex-col gap-8",onSubmit:s,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"whitespace-nowrap font-semibold",children:"Search Term:"}),e.jsx("input",{placeholder:"Search...",id:"searchTerm",type:"text",value:t.searchTerm,onChange:j,className:"border rounded-md p-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-semibold",children:"Sort:"}),e.jsxs("select",{onChange:j,value:t.sort,id:"sort",className:"border rounded-md p-2",children:[e.jsx("option",{value:"desc",children:"Latest"}),e.jsx("option",{value:"asc",children:"Oldest"})]})]}),e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-md",children:"Apply Filters"})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-3xl font-semibold sm:border-b border-gray-500 p-3 mt-5",children:"Videos results:"}),e.jsxs("div",{className:"p-7 flex flex-wrap gap-4",children:[l&&e.jsx("p",{className:"text-xl text-gray-500",children:"Loading..."}),!l&&n.length===0&&e.jsx("p",{className:"text-xl text-gray-500",children:"No videos found."}),!l&&n.map(i=>e.jsx(me,{video:i},i._id)),r&&e.jsx("button",{onClick:u,className:"text-teal-500 text-lg hover:underline p-7 w-full",children:"Show More"})]})]})]})}function Dt(){return e.jsxs(ye,{children:[e.jsx(St,{}),e.jsx(ft,{}),e.jsxs(Ae,{children:[e.jsx(C,{path:"/",element:e.jsx(Ge,{})}),e.jsx(C,{path:"/about",element:e.jsx(Je,{})}),e.jsx(C,{path:"/sign-in",element:e.jsx(rt,{})}),e.jsx(C,{path:"/sign-up",element:e.jsx(ht,{})}),e.jsx(C,{path:"/all-posts",element:e.jsx(Ct,{})}),e.jsx(C,{path:"/all-videos",element:e.jsx(Tt,{})}),e.jsx(C,{element:e.jsx(yt,{}),children:e.jsx(C,{path:"/dashboard",element:e.jsx(xt,{})})}),e.jsxs(C,{element:e.jsx(le,{}),children:[e.jsx(C,{path:"/create-post",element:e.jsx(bt,{})}),e.jsx(C,{path:"/update-post/:postId",element:e.jsx(wt,{})})]}),e.jsxs(C,{element:e.jsx(le,{}),children:[e.jsx(C,{path:"/create-video",element:e.jsx(Pt,{})}),e.jsx(C,{path:"/update-video/:videoId",element:e.jsx(Ut,{})})]}),e.jsx(C,{path:"/post/:postSlug",element:e.jsx(kt,{})})]}),e.jsx(jt,{})]})}const Et=qe({user:st,theme:pt}),It={key:"root",storage:He,version:1},Lt=Ye(It,Et),pe=we({reducer:Lt,middleware:t=>t({serializableCheck:!1})}),Ft=Be(pe);function Mt({children:t}){const{theme:d}=U(n=>n.theme);return e.jsx("div",{className:d,children:e.jsx("div",{className:"bg-white text-gray-700 dark:text-gray-200 dark:bg-[rgb(16,23,42)] min-h-screen",children:t})})}je.createRoot(document.getElementById("root")).render(e.jsx(We,{persistor:Ft,children:e.jsx(be,{store:pe,children:e.jsx(Mt,{children:e.jsx(Dt,{})})})}));
